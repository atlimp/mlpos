@using MLPos.Web.Models
@using MLPos.Core.Model
@using MLPos.Web.Utils
@using Microsoft.Extensions.Localization
@using MLPos.Web
@inject IStringLocalizer<SharedResources> SharedLocalizer
@model GenerateInvoiceViewModel
@{
    Layout = "_Admin_Layout";
    ViewData["Title"] = SharedLocalizer["GenerateInvoice"];

    Dictionary<long, string> customers = new Dictionary<long, string>();
    customers.Add(-1, "");
    foreach (Customer customer in Model.Customers)
    {
        customers[customer.Id] = customer.Name;
    }

    Dictionary<long, string> paymentMethods = new Dictionary<long, string>();
    paymentMethods.Add(-1, "");
    foreach (PaymentMethod paymentMethod in Model.PaymentMethods)
    {
        paymentMethods[paymentMethod.Id] = paymentMethod.Name;
    }
}

@section Styles {
    <link rel="stylesheet" href="~/css/Invoices.css">
}

@section Scripts {
}


<div class="container pageContainer">
    <div class="container pageContentContainer">
        <div class="container formContainer">
            <ul class="validationErrors">
                @if (Model.ValidationErrors != null && Model.ValidationErrors.Any())
                {
                    @foreach (var error in Model.ValidationErrors)
                    {
                        <li>@error.Error</li>
                    }
                }
            </ul>
            <form class="editForm" method="POST">
                <div class="container detailsContainer">
                    <div>
                        <label class="inputLabel" for="customerId">
                            @SharedLocalizer["Customer"]:
                            @Html.DropDownListFor(m => m.SelectedCustomerId, new SelectList(customers, "Key", "Value"), new { id = "type", @class = "formInput", Selected = 1 })
                        </label>
                        <label class="inputLabel" for="paymentMethodId">
                            @SharedLocalizer["PaymentMethod"]:
                            @Html.DropDownListFor(m => m.SelectedPaymentMethodId, new SelectList(paymentMethods, "Key", "Value"), new { id = "type", @class = "formInput" })
                        </label>
                        <label class="inputLabel" for="dateFrom">
                            @SharedLocalizer["DateFrom"]:
                            @Html.TextBoxFor(m => m.Period.DateFrom, new { id = "dateFrom", @class = "formInput", Type = "date" })
                        </label>
                        <label class="inputLabel" for="dateTo">
                            @SharedLocalizer["DateTo"]:
                            @Html.TextBoxFor(m => m.Period.DateTo, new { id = "dateTo", @class = "formInput", Type = "date" })
                        </label>
                    </div>
                </div>

                <div class="formButtons">
                    <a class="button buttonSecondary formButton" href="@Url.Action("Index")">@SharedLocalizer["Back"]</a>
                    <button class="button buttonPrimary formButton" type="submit">@SharedLocalizer["GenerateInvoice"]</button>
                </div>

            </form>
        </div>
    </div>
</div>